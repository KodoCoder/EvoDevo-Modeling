* Update Parts
** Purpose
+ Takes a set of developing parts, and iterates through update cycles.
  Update cycles take one part at a time; it adds regulators produced
  by codon and diffuses regulators based on the diffusion rates.
** Use
+ It is used after the parts are setup, and is finished when all the
  parts are fully developed.  After this stage, the parts are ready
  to have their characteristics calculated and then put together.
** Notes:
+ Currently discarding not-fully-developed parts, but could keep them
  and have more "default parts".
* Code
#+NAME: update_code
#+BEGIN_SRC python :results output replace pp :export both :tangle yes
  # ### Code ###
  from part import Part, BodyPart, JointPart, NeuronPart, SensorPart, WirePart
  
  
  def update_cycles(parts_developing):
      """Updates all proto-parts, in series (step-by-step).
  
      When proto-part is fully developed, this function removes the part
      from parts_developing and places it into parts_built.  If the part
      cannot develope fully, it is discarded"""
      parts_built = []
      while(parts_developing):
          count = 0
          for i in parts_developing:
              # Check for non-producing proto-parts, and if they are all
              # that is left, end development.
              if i.regulators_per_update == 0:
                  count += 1
                  i._diffusion()
                  if count == len(parts_developing):
                      parts_developing.remove(i)
                      count -= 1
              # Check if proto-part is done with development, and take out
              # of the update_cycles if it is.
              elif (i.capacity <= (i.regulatory_elements +
                                   i.regulators_per_update)):
                  i.set_characteristics()
                  parts_built.append(i)
                  parts_developing.remove(i)
              # Otherwise, keep updating
              else:
                  i.update()
                  i._diffusion()
      return parts_built
#+END_SRC
